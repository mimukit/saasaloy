---
import BaseLayout from "./BaseLayout.astro";
import { Button } from "@repo/ui/components";

interface Props {
  title: string;
  description: string;
  publishedAt: Date;
  updatedDate?: Date;
  heroImage?: ImageMetadata;
}

const { title, description, publishedAt, updatedDate, heroImage } = Astro.props;

const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  }).format(date);
};
---

<BaseLayout title={`${title} | SaasAloy Blog`} description={description}>
  <article class="container mx-auto max-w-4xl px-4 py-8">
    <div class="mb-6">
      <a href="/blog">
        <Button variant="ghost" size="sm" class="mb-4"> ‚Üê Back to blog </Button>
      </a>
    </div>

    {
      heroImage && (
        <img
          src={heroImage.src}
          alt={title}
          class="mb-8 h-64 w-full rounded-lg object-cover"
        />
      )
    }

    <header class="mb-8">
      <h1 class="mb-4 text-4xl font-bold">{title}</h1>
      <p class="text-muted-foreground mb-4 text-xl">{description}</p>
      <div class="text-muted-foreground flex items-center gap-4 text-sm">
        <time datetime={publishedAt.toISOString()}>
          Published: {formatDate(publishedAt)}
        </time>
        {
          updatedDate && (
            <time datetime={updatedDate.toISOString()}>
              Updated: {formatDate(updatedDate)}
            </time>
          )
        }
      </div>
    </header>

    <div
      class="[&_a]:text-primary [&_code]:bg-muted [&_pre]:bg-muted [&_blockquote]:border-primary max-w-none space-y-4 [&_a]:underline [&_blockquote]:border-l-4 [&_blockquote]:pl-4 [&_blockquote]:italic [&_code]:rounded [&_code]:px-1.5 [&_code]:py-0.5 [&_code]:text-sm [&_h2]:mt-8 [&_h2]:mb-4 [&_h2]:text-2xl [&_h2]:font-bold [&_h3]:mt-6 [&_h3]:mb-3 [&_h3]:text-xl [&_h3]:font-semibold [&_ol]:ml-6 [&_ol]:list-decimal [&_p]:leading-7 [&_pre]:overflow-x-auto [&_pre]:rounded-lg [&_pre]:p-4 [&_ul]:ml-6 [&_ul]:list-disc"
    >
      <slot />
    </div>
  </article>
</BaseLayout>
